@model HR_KD.Data.LoaiNgayNghi
@{
    Layout = "~/Views/Shared/_ThemeLayout.cshtml";
}
@{
    ViewData["Title"] = "Xóa loại ngày nghỉ";
}

<style>
    .delete-page-container {
        max-width: 1200px;
        margin: 2rem auto;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        overflow: hidden;
    }

    .card-header-custom {
        background: linear-gradient(135deg, #e53935 0%, #d32f2f 100%);
        color: white;
        padding: 1.5rem;
        border-bottom: none;
    }

    .page-title {
        font-weight: 600;
        letter-spacing: 0.5px;
        margin: 0;
    }

    .go-back-btn {
        border: 1px solid rgba(255, 255, 255, 0.6);
        transition: all 0.3s ease;
    }

        .go-back-btn:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateX(-3px);
        }

    .content-container {
        padding: 2rem;
        background-color: #fff;
    }

    .warning-alert {
        background-color: #fff3cd;
        border-left: 4px solid #ffc107;
        padding: 1.25rem;
        border-radius: 4px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .info-card {
        background-color: #f9f9f9;
        border-radius: 8px;
        padding: 1.5rem;
        height: 100%;
        border: 1px solid #eee;
        transition: all 0.3s ease;
    }

        .info-card:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

    .info-label {
        color: #555;
        font-weight: 600;
        font-size: 0.9rem;
    }

    .info-value {
        color: #333;
        font-weight: 500;
    }

    .badge-custom-yes {
        background-color: #4caf50;
        padding: 0.5em 0.8em;
        font-weight: 500;
    }

    .badge-custom-no {
        background-color: #9e9e9e;
        padding: 0.5em 0.8em;
        font-weight: 500;
    }

    .actions-container {
        padding: 1.5rem 0 0.5rem 0;
        border-top: 1px solid #eee;
        margin-top: 1.5rem;
    }

    .delete-btn {
        background: linear-gradient(135deg, #e53935 0%, #d32f2f 100%);
        border: none;
        padding: 0.6rem 1.5rem;
        font-weight: 500;
        transition: all 0.3s ease;
    }

        .delete-btn:hover {
            background: linear-gradient(135deg, #d32f2f 0%, #b71c1c 100%);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px);
        }

    .cancel-btn {
        background-color: #f5f5f5;
        color: #333;
        border: 1px solid #ddd;
        padding: 0.6rem 1.5rem;
        font-weight: 500;
        transition: all 0.3s ease;
    }

        .cancel-btn:hover {
            background-color: #eeeeee;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }

    .icon-shake {
        animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        animation-delay: 0.2s;
    }
</style>

<div class="delete-page-container">
    <div class="card-header-custom">
        <div class="d-flex justify-content-between align-items-center">
            <h4 class="page-title">
                <i class="fas fa-trash-alt mr-2"></i> @ViewData["Title"]
            </h4>
            <a asp-action="Index" class="btn go-back-btn">
                <i class="fas fa-arrow-left mr-1"></i> Quay lại danh sách
            </a>
        </div>
    </div>

    <div class="content-container">
        <div class="warning-alert">
            <div class="d-flex align-items-center">
                <i class="fas fa-exclamation-triangle text-warning mr-3 icon-shake" style="font-size: 1.8rem;"></i>
                <div>
                    <strong style="font-size: 1.1rem;">Xác nhận xóa loại ngày nghỉ</strong>
                    <p class="mt-1 mb-0">Bạn đang chuẩn bị xóa một loại ngày nghỉ. Dữ liệu sau khi xóa sẽ không thể khôi phục. Vui lòng xác nhận thông tin trước khi thực hiện.</p>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-md-6 mb-4">
                <div class="info-card">
                    <h5 class="mb-3 text-primary">
                        <i class="fas fa-info-circle mr-2"></i> Thông tin cơ bản
                    </h5>
                    <div class="row mb-3">
                        <div class="col-sm-4 info-label">Mã loại ngày nghỉ:</div>
                        <div class="col-sm-8 info-value">@Model.MaLoaiNgayNghi</div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4 info-label">Tên loại:</div>
                        <div class="col-sm-8 info-value"><strong>@Model.TenLoai</strong></div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 info-label">Mô tả:</div>
                        <div class="col-sm-8 info-value">
                            @if (string.IsNullOrEmpty(Model.MoTa))
                            {
                                <span class="text-muted">Không có mô tả</span>
                            }
                            else
                            {
                                @Model.MoTa
                            }
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="info-card">
                    <h5 class="mb-3 text-primary">
                        <i class="fas fa-cog mr-2"></i> Cấu hình lương và phép
                    </h5>
                    <div class="row mb-3">
                        <div class="col-sm-6 info-label">Được hưởng lương:</div>
                        <div class="col-sm-6 info-value">
                            @if (Model.HuongLuong)
                            {
                                <span class="badge badge-custom-yes"><i class="fas fa-check mr-1"></i> Có</span>
                            }
                            else
                            {
                                <span class="badge badge-custom-no"><i class="fas fa-times mr-1"></i> Không</span>
                            }
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-6 info-label">Tính vào phép năm:</div>
                        <div class="col-sm-6 info-value">
                            @if (Model.TinhVaoPhepNam)
                            {
                                <span class="badge badge-custom-yes"><i class="fas fa-check mr-1"></i> Có</span>
                            }
                            else
                            {
                                <span class="badge badge-custom-no"><i class="fas fa-times mr-1"></i> Không</span>
                            }
                        </div>
                    </div>
                   @*  <div class="row">
                        <div class="col-sm-6 info-label">Có tính vào lương:</div>
                        <div class="col-sm-6 info-value">
                            @if (Model.CoTinhVaoLuong)
                            {
                                <span class="badge badge-custom-yes"><i class="fas fa-check mr-1"></i> Có</span>
                            }
                            else
                            {
                                <span class="badge badge-custom-no"><i class="fas fa-times mr-1"></i> Không</span>
                            }
                        </div>
                    </div> *@
                </div>
            </div>
        </div>

        <div class="actions-container">
            <form asp-action="Delete" id="deleteForm" class="text-center">
                <input type="hidden" asp-for="MaLoaiNgayNghi" />
                <div class="d-flex justify-content-center gap-3">
                    <button type="button" class="btn delete-btn mr-2" onclick="confirmDelete()">
                        <i class="fas fa-trash-alt mr-2"></i> Xác nhận xóa
                    </button>
                    <a asp-action="Index" class="btn cancel-btn">
                        <i class="fas fa-times mr-2"></i> Hủy thao tác
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

<script>

    // Thêm thư viện SweetAlert2 và Animate.css
    document.addEventListener('DOMContentLoaded', function () {
        // Thêm SweetAlert2 script vào header nếu chưa có
        if (!document.querySelector('script[src*="sweetalert2"]')) {
            const sweetalertScript = document.createElement('script');
            sweetalertScript.src = 'https://cdn.jsdelivr.net/npm/sweetalert2@11';
            document.head.appendChild(sweetalertScript);
        }

        // Thêm Animate.css nếu chưa có
        if (!document.querySelector('link[href*="animate.css"]')) {
            const animateCss = document.createElement('link');
            animateCss.rel = 'stylesheet';
            animateCss.href = 'https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css';
            document.head.appendChild(animateCss);
        }

        // Thêm style mới cho SweetAlert2
        const customStyle = document.createElement('style');
        customStyle.textContent = `
                .swal2-popup {
                    border-radius: 15px;
                    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
                }
                .swal2-title {
                    font-size: 1.6rem;
                    font-weight: 600;
                    color: #333;
                }
                .swal2-html-container {
                    margin-top: 1.5rem;
                    text-align: left;
                    padding: 0 1rem;
                }
                .swal2-confirm {
                    border-radius: 8px !important;
                    padding: 12px 24px !important;
                    font-weight: 500 !important;
                }
                .swal2-cancel {
                    border-radius: 8px !important;
                    padding: 12px 24px !important;
                    font-weight: 500 !important;
                }
                .text-danger {
                    color: #d32f2f;
                }
                .text-left {
                    text-align: left;
                }
            `;
        document.head.appendChild(customStyle);
    });

    function confirmDelete() {
        // Kiểm tra nếu SweetAlert2 đã được load
        if (typeof Swal === 'undefined') {
            console.error('SweetAlert2 is not loaded');
            // Fallback đến confirm thông thường nếu SweetAlert2 không load được
            if (confirm('Bạn có chắc chắn muốn xóa loại ngày nghỉ này? Dữ liệu sau khi xóa sẽ không thể khôi phục.')) {
                document.getElementById('deleteForm').submit();
            }
            return false;
        }

        // Hiển thị SweetAlert2
        Swal.fire({
            title: 'Xác nhận xóa?',
            html: '<div class="text-left"><p>Bạn có chắc chắn muốn xóa loại ngày nghỉ này?</p><p class="text-danger"><i class="fas fa-exclamation-triangle mr-2"></i><strong>Dữ liệu sau khi xóa sẽ không thể khôi phục.</strong></p></div>',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#d33',
            cancelButtonColor: '#6c757d',
            confirmButtonText: '<i class="fas fa-trash-alt mr-2"></i>Xác nhận xóa',
            cancelButtonText: '<i class="fas fa-times mr-2"></i>Hủy thao tác',
            focusCancel: true,
            customClass: {
                confirmButton: 'btn btn-danger',
                cancelButton: 'btn btn-secondary'
            },
            buttonsStyling: true,
            reverseButtons: true,
            background: '#fff',
            backdrop: `rgba(0,0,0,0.4)`,
            showClass: {
                popup: 'animate__animated animate__fadeInDown animate__faster'
            },
            hideClass: {
                popup: 'animate__animated animate__fadeOutUp animate__faster'
            }
        }).then((result) => {
            if (result.isConfirmed) {
                // Nếu xác nhận, submit form
                document.getElementById('deleteForm').submit();
            }
        });

        return false;
    }
</script>

<!-- Optional: Add Bootstrap 5 JS if not already in your layout -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Add Font Awesome if not already in your layout -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />

<!-- Add Animate.css for animations -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />